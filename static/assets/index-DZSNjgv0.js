(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))p(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const L of l.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&p(L)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function p(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const i=document.getElementById("input-text"),o=document.getElementById("output-text"),c=document.getElementById("summarize-button"),B=c==null?void 0:c.querySelector(".button-text"),A=c==null?void 0:c.querySelector(".spinner"),d=document.getElementById("sample-text-button"),O=d==null?void 0:d.querySelector(".button-text"),R=d==null?void 0:d.querySelector(".spinner"),u=document.getElementById("summarize-alternative-button"),$=u==null?void 0:u.querySelector(".button-icon"),q=u==null?void 0:u.querySelector(".spinner"),a=document.getElementById("star-rating-area"),I=document.getElementById("star-rating-question"),m=document.getElementById("star-container"),h=m==null?void 0:m.querySelectorAll(".star"),r=document.getElementById("submit-star-rating-button"),x=document.getElementById("star-rating-thanks");let b=0;const S="starRatingSubmitted",y=document.getElementById("feedback-section"),T=document.getElementById("feedback-question"),w=document.getElementById("feedback-buttons-container"),E=document.getElementById("feedback-yes-button"),k=document.getElementById("feedback-no-button"),v=document.getElementById("feedback-thanks");function f(e){if(!e)return;e.style.height="auto";let t=e.scrollHeight;const n=parseInt(window.getComputedStyle(e).minHeight,10)||150;t<n&&(t=n),e.style.height=`${t}px`}i&&i.addEventListener("input",()=>f(i));function g(e){c&&(c.disabled=e),d&&(d.disabled=e),u&&(u.disabled=e)}async function U(e,t){if(!o||!y||!a){console.error("Core UI elements for output/feedback are missing."),alert("A critical UI error occurred. Please refresh the page."),g(!1);return}o.value="요약 생성 중입니다, 잠시만 기다려 주세요...",f(o),y.style.display="none",a.style.display="none";try{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{text:e}})});if(!n.ok){const s=await n.text();throw new Error(`서버 오류: ${n.status} - ${s||n.statusText}`)}const p=await n.json();o.value=(p==null?void 0:p.result)||"요약을 생성하지 못했습니다. 서버 응답 형식이 올바르지 않습니다."}catch(n){console.error(`텍스트 요약 중 오류 발생 (엔드포인트: ${t}):`,n);let p="요약 생성에 실패했습니다. 나중에 다시 시도해 주세요.";n instanceof Error&&(p+=`
상세 정보: ${n.message}`),o.value=p}finally{f(o),a&&(a.style.display="block",M()),y&&(y.style.display="block",T&&w&&v&&(T.style.display="block",w.style.display="flex",v.style.display="none",E&&(E.disabled=!1),k&&(k.disabled=!1)))}}async function j(){if(!c||!B||!A||!i||!o){console.error("주요 요약 UI 요소가 누락되었습니다."),alert("예상치 못한 UI 오류가 발생했습니다. 페이지를 새로고침해 주세요.");return}const e=i.value.trim();if(!e){alert("요약할 텍스트를 입력해 주세요."),o.value="",f(o),y&&(y.style.display="none"),a&&(a.style.display="none");return}g(!0),B.textContent="요약 중...",A.style.display="inline-block",await U(e,"/api/summarize"),B.textContent="요약하기",A.style.display="none",g(!1)}async function H(){if(!u||!$||!q||!i||!o){console.error("대안 요약 UI 요소가 누락되었습니다."),alert("예상치 못한 UI 오류가 발생했습니다. 페이지를 새로고침해 주세요.");return}const e=i.value.trim();if(!e){alert("요약할 텍스트를 입력해 주세요."),o.value="",f(o),y&&(y.style.display="none"),a&&(a.style.display="none");return}g(!0),$.style.display="none",q.style.display="inline-block",await U(e,"/api/core-summary"),$.style.display="inline-block",q.style.display="none",g(!1)}async function D(){if(!i||!d||!O||!R){console.error("샘플 텍스트 UI 요소 중 일부가 누락되었습니다."),alert("샘플 텍스트 기능을 초기화하는 중 오류가 발생했습니다.");return}g(!0),O.textContent="로딩 중...",R.style.display="inline-block";try{const e=await fetch("/api/sample-text",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok){const n=await e.text();throw new Error(`서버 오류: ${e.status} - ${n||e.statusText}`)}const t=await e.json();if(t&&typeof t.text=="string")i.value=t.text,f(i);else throw new Error("샘플 텍스트 형식이 올바르지 않습니다.")}catch(e){console.error("샘플 텍스트 로딩 중 오류 발생:",e);let t="샘플 텍스트를 불러오는데 실패했습니다.";e instanceof Error&&e.message&&(t+=`
상세 정보: ${e.message}`),alert(t),i.value="",f(i)}finally{O.textContent="샘플 텍스트",R.style.display="none",g(!1)}}async function z(e){T&&w&&v&&E&&k&&(T.style.display="none",w.style.display="none",v.style.display="block",E.disabled=!0,k.disabled=!0);try{const t=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e})});if(t.ok)console.log("'다음에도 이용' 피드백이 성공적으로 제출되었습니다:",e);else{const n=await t.text();console.error(`'다음에도 이용' 피드백 제출 오류: ${t.status} - ${n||t.statusText}`)}}catch(t){console.error("'다음에도 이용' 피드백 제출 중 네트워크 오류 발생:",t)}}function M(){if(!a||!I||!m||!h||!r||!x){console.error("Star rating UI elements are missing."),a&&(a.style.display="none");return}localStorage.getItem(S)==="true"?P():(I.style.display="block",m.style.display="flex",h.forEach(e=>{e.style.pointerEvents="auto",e.setAttribute("tabindex","0")}),N(0),b=0,r.style.display="none",r.disabled=!0,x.style.display="none")}function N(e){h&&h.forEach(t=>{parseInt(t.dataset.value||"0")<=e?(t.innerHTML="&#9733;",t.classList.add("selected"),t.setAttribute("aria-checked","true")):(t.innerHTML="&#9734;",t.classList.remove("selected"),t.setAttribute("aria-checked","false"))})}function C(e){if(localStorage.getItem(S)==="true")return;const t=e.target;if(!t.classList.contains("star"))return;const n=parseInt(t.dataset.value||"0");n>0&&(b=n,N(b),r&&(r.style.display="inline-block",r.disabled=!1))}function P(){!a||!I||!m||!r||!x||!h||(I.style.display="none",m.style.display="none",r.style.display="none",x.style.display="block",h.forEach(e=>{e.style.pointerEvents="none",e.removeAttribute("tabindex")}))}async function J(){if(b===0){alert("별점을 선택해주세요.");return}if(r){r.disabled=!0;try{const e=await fetch("/api/star-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:b})});if(!e.ok){const t=await e.text();console.error(`별점 제출 오류: ${e.status} - ${t||e.statusText}`),alert("별점 제출에 실패했습니다. 나중에 다시 시도해주세요."),localStorage.getItem(S)!=="true"&&(r.disabled=!1);return}console.log("별점이 성공적으로 제출되었습니다:",b),localStorage.setItem(S,"true"),P()}catch(e){console.error("별점 제출 중 네트워크 오류 발생:",e),alert("별점 제출 중 네트워크 오류가 발생했습니다. 나중에 다시 시도해주세요."),localStorage.getItem(S)!=="true"&&r&&(r.disabled=!1)}}}c&&c.addEventListener("click",j);d&&d.addEventListener("click",D);u&&u.addEventListener("click",H);E&&E.addEventListener("click",()=>z("yes"));k&&k.addEventListener("click",()=>z("no"));m&&(m.addEventListener("click",C),m.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(C(e),e.preventDefault())}));r&&r.addEventListener("click",J);window.addEventListener("load",()=>{f(i),f(o),y&&(y.style.display="none"),a&&(a.style.display="none"),M()});window.addEventListener("resize",()=>{f(i),f(o)});
